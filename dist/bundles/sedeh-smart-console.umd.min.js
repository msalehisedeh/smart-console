!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@sedeh/smart-console",["exports","@angular/core","@angular/common"],i):i((t.sedeh=t.sedeh||{},t.sedeh["smart-console"]={}),t.ng.core,t.ng.common)}(this,function(t,i,e){"use strict";function o(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,s,n=e.call(t),r=[];try{for(;(void 0===i||0<i--)&&!(o=n.next()).done;)r.push(o.value)}catch(p){s={error:p}}finally{try{o&&!o.done&&(e=n["return"])&&e.call(n)}finally{if(s)throw s.error}}return r}function l(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(o(arguments[i]));return t}var s=function(){function t(){this.defaultLog=console.log,this.defaultInfo=console.info,this.defaultWarn=console.warn,this.defaultError=console.error,this.defaultTable=console.table,this.defaultTrace=console.trace,this.defaultAssert=console.assert,this.defaultException=console.exception,this.defaultDebug=console.debug,this.output=new i.EventEmitter,this.watchList={}}return t.prototype._argsToString=function(t){var e=[];return t.map(function(t){if("object"==typeof t)try{e.push(JSON.stringify(t))}catch(i){t.message?e.push(t.message):e.push(t)}else e.push(t)}),e.join(",")},t.prototype._suppressed=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=!1;if(this.options.suppress){var o=this._argsToString(t);this.options.suppress.map(function(t){-1<o.indexOf(t)&&(e=!0)})}return e},t.prototype._getStack=function(){var t="";try{throw new Error("getStack")}catch(i){t=(t=0<(t=i.stack).indexOf("\r")?t.indexOf("\r"):t.split("\n"))[4]}return t},t.prototype._blocked=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=!1;if(this.options.blockCaller){var o=this._getStack();this.options.blockCaller.map(function(t){-1<o.indexOf(t)&&(e=!0)})}return e},t.prototype._throttle=function(){for(var i=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=!1;return this.options.throttleOn&&t instanceof Array&&t.map(function(t){t instanceof Array?t.map(function(t){0===("string"==typeof t?t.indexOf("level_"):-1)&&parseInt(t.substring(6),10)<=i.options.throttleOn&&(o=!0)}):0===t.indexOf("level_")&&parseInt(t.substring(6),10)<=i.options.throttleOn&&(o=!0)}),o},t.prototype._reportWatch=function(i){var e=this,t=Object.keys(this.watchList);if(t.length)try{var o=this._argsToString(i);t.map(function(t){-1<o.indexOf(t)&&e.watchList[t].emit(i)})}catch(s){}},t.prototype._upscale=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e,o=this._getStack(),s=/([^(]+)@|at ([^(]+) \(/g.exec(o),n=o.lastIndexOf("/"),r=0<n?o.substring(n+1).split(":")[0]:o,p=s?s[1]||s[2]:o,h=0<p.indexOf("/")?p.substring(0,p.indexOf("/")):"",a=new Date;return(e=[a.getMonth()+1+"/"+a.getDay()+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+":"+a.getMilliseconds()+" ["+r+(h?" | "+h:"")+"] "]).concat.apply(e,l(t))},t.prototype._info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(this.options.infoDisabled!==undefined&&this.options.infoDisabled||this._suppressed(t)||this._throttle(t)||this._blocked(t))){var e=this.options.upscale?this._upscale(t):t;this.options.upgrade?this.options.emitOutput?(this.output.emit(l(["[log]"],e)),this.options.logAfterEmit&&this.defaultLog.apply(this,l(e))):this.defaultLog.apply(this,l(e)):this.options.emitOutput?(this.output.emit(l(["[info]"],e)),this.options.logAfterEmit&&this.defaultLog.apply(this,l(e))):this.defaultInfo.apply(this,l(e))}this._reportWatch(t)},t.prototype._log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(this.options.logDisabled!==undefined&&this.options.logDisabled||this._suppressed(t)||this._throttle(t)||this._blocked(t))){var e=this.options.upscale?this._upscale(t):t;this.options.downGrade?this.options.emitOutput?(this.output.emit(l(["[info]"],e)),this.options.logAfterEmit&&this.defaultLog.apply(this,l(e))):this.defaultInfo.apply(this,l(e)):this.options.upgrade?this.options.emitOutput?(this.output.emit(l(["[warn]"],e)),this.options.logAfterEmit&&this.defaultWarn.apply(this,l(e))):this.defaultWarn.apply(this,l(e)):this.options.emitOutput?(this.output.emit(l(["[log]"],e)),this.options.logAfterEmit&&this.defaultLog.apply(this,l(e))):this.defaultLog.apply(this,l(e))}this._reportWatch(t)},t.prototype._warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(this.options.warnDisabled!==undefined&&this.options.warnDisabled||this._suppressed(t)||this._throttle(t)||this._blocked(t))){var e=this.options.upscale?this._upscale(t):t;this.options.downGrade?this.options.emitOutput?(this.output.emit(l(["[log]"],e)),this.options.logAfterEmit&&this.defaultLog.apply(this,l(e))):this.defaultLog.apply(this,l(e)):this.options.upgrade?this.options.emitOutput?(this.output.emit(l(["[error]"],e)),this.options.logAfterEmit&&this.defaultError.apply(this,l(e))):this.defaultError.apply(this,l(e)):this.options.emitOutput?(this.output.emit(l(["[warn]"],e)),this.options.logAfterEmit&&this.defaultWarn.apply(this,l(e))):this.defaultWarn.apply(this,l(e))}this._reportWatch(t)},t.prototype._error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(this.options.errorDisabled!==undefined&&this.options.errorDisabled||this._suppressed(t)||this._throttle(t)||this._blocked(t))){var e=this.options.upscale?this._upscale(t):t;this.options.downGrade?this.options.emitOutput?(this.output.emit(l(["[log]"],e)),this.options.logAfterEmit&&this.defaultLog.apply(this,l(e))):this.defaultLog.apply(this,l(e)):this.options.emitOutput?(this.output.emit(l(["[error]"],e)),this.options.logAfterEmit&&this.defaultError.apply(this,l(e))):this.defaultError.apply(this,l(e))}this._reportWatch(t)},t.prototype._table=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(this.options.tableDisabled!==undefined&&this.options.errorDisabled||this._suppressed(t)||this._throttle(t)||this._blocked(t)))if(this.options.emitOutput){var e=this.options.upscale?this._upscale(t):t;this.output.emit(l(["[table]"],e)),this.options.logAfterEmit&&this.defaultTable.apply(this,l(t))}else this.defaultTable.apply(this,l(t));this._reportWatch(t)},t.prototype._trace=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(this.options.traceDisabled!==undefined&&this.options.traceDisabled||this._throttle(t))){var e=this.options.upscale?this._upscale(t):t;this.options.emitOutput?(this.output.emit(l(["[trace]"],e)),this.options.logAfterEmit&&this.defaultTrace.apply(this,l(e))):this.defaultTrace.apply(this,l(e))}this._reportWatch(t)},t.prototype._exception=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.options.exceptionDisabled!==undefined&&this.options.exceptionDisabled||this._throttle(t)||(this.options.emitOutput?(this.output.emit(l(["[exception]"],t)),this.options.logAfterEmit&&this.defaultException.apply(this,l(t))):this.defaultException.apply(this,l(t))),this._reportWatch(t)},t.prototype._debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.options.debugDisabled!==undefined&&this.options.debugDisabled||this._throttle(t)||(this.options.emitOutput?(this.output.emit(l(["[debug]"],t)),this.options.logAfterEmit&&this.defaultDebug.apply(this,l(t))):this.defaultDebug.apply(this,l(t))),this._reportWatch(t)},t.prototype._assert=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.options.assertDisabled!==undefined&&this.options.assertDisabled||this._throttle(t)||(this.options.emitOutput?(this.output.emit(l(["[assert]"],t)),this.options.logAfterEmit&&this.defaultAssert.apply(this,l(t))):this.defaultAssert.apply(this,l(t))),this._reportWatch(t)},t.prototype.makeSmartLogs=function(t){this.options=t,console.log&&(console.log=this._log.bind(this)),console.info&&(console.info=this._info.bind(this)),console.warn&&(console.warn=this._warn.bind(this)),console.error?console.error=this._error.bind(this):console.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},console.table?console.table=this._table.bind(this):console.table=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},console.trace?console.trace=this._trace.bind(this):console.trace=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},console.debug?console.debug=this._debug.bind(this):console.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},console.assert?console.assert=this._assert.bind(this):console.assert=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},console.exception?console.exception=this._exception.bind(this):console.exception=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]}},t.prototype.redirectedOutput=function(){return this.output},t.prototype.addWatch=function(t){return this.watchList[t]||(this.watchList[t]=new i.EventEmitter),this.watchList[t]},t.prototype.removeWatch=function(t){delete this.watchList[t]},t.prototype.clearWatchList=function(t){t.map(function(t){return t.unsubscribe()}),this.watchList={}},t.prototype.markupTrace=function(t){var o=t;return t instanceof Array&&(o=[],t.map(function(t){if("string"==typeof t){var i=0<t.indexOf("\n")?"\n":0<t.indexOf("\r")?"\r":undefined;if(i&&(-1<t.indexOf("@")||-1<t.indexOf("("))&&0<t.indexOf(":")){var h=[];t.split(i).map(function(t){var i=t.indexOf("@"),e=t.indexOf("(");if(0<e){var o=(r=t.substring(e+1,t.length-1).split(":")).length,s=t.substring(0,e)+":"+r[o-2]+":"+r[o-1],n=r.slice(0,o-2).join(":");h.push('<a href="'+n+'">'+s+"</a>")}else if(0<=i){if(t.indexOf(":")<0)h.push('<a href="'+t.substring(i+1)+'">'+t.substring(0,i)+"</a>");else{o=(r=t.substring(i+1,t.length).split(":")).length;var r,p=t.substring(0,i)+":"+r[o-2]+":"+r[o-1];n=r.slice(0,o-2).join(":");h.push('<a href="'+n+'">'+p+"</a>")}}else h.push(t)}),o.push(h.join("<br />"))}else i?o.push(t.split(i).join("<br />")):o.push(t)}else if("object"==typeof t)try{o.push(JSON.stringify(t))}catch(e){t.message?o.push(t.message):o.push(t)}else o.push(t)})),o},t.decorators=[{type:i.Injectable}],t}(),n=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{declarations:[],exports:[],imports:[e.CommonModule],providers:[s],schemas:[i.CUSTOM_ELEMENTS_SCHEMA]}]}],t}();t.SmartConsoleService=s,t.SmartConsoleModule=n,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=sedeh-smart-console.umd.min.js.map